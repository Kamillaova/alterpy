*__Пирог — Programmable Image Edit__*

Англо-русский почти естественный язык редактирования изображений в телеграме, который преобразуется в код на языке Python.

Из-за ограничений телеги и из соображений разумного картинки могут быть уменьшены с сохренением соотношения сторон, чтобы вписаться в квадрат 2560 на 2560 пикселей.

Программа пирога — текстовый аргумент к префиксной команде `.пирог` (префикс обязателен). Это значит, что можно исполнять код пирога из прикреплённого ответа, но только если аргумент оригинального сообщения пустой.

Обработчик команды "пирог" требует чтобы в сообщении или прикреплённом ответе содержалась картинка в виде изображения или документа. Альбомы не поддерживаются из-за ограничения телеграма — это сообщения с разным id.

Пирог может видеть не больше двух картинок из сообщений — картинку сообщения `соо` и прикрепленного ответа `ответ`. Если в сообщении нет картинки, а в прикрепленном ответе есть, то в `соо` лежит та же картинка, что и в `ответ`. Если в прикреплённом ответе нет картинки или прикреплённого ответа не существует, значение `ответ` будет установлено в `None`, а любые операции с ним будут заканчиваться ошибкой.

Команды пирога можно писать как на русском, так и на английском языках, но русскоязычная справка покрывает только русский вариант написания.

Все команды пирога пишутся с новой строки, число пробелов между словами можно по идее ставить любое. Пустые строки игнорируются. Если команда не распознаётся, то скорее всего требуется прочитать документацию на неё. Узнать соответствующую справочную страницу можно так: `никак`. Если хотя бы одна команда не распозналась, программа не запускается.

Команды языка нечувствительны к регистру. Например `отправить`, `ОТПРАВИТЬ` и `отПрАвИТь` — это одна и та же команда. Переменные могут содержать в названии лишь русские и английские буквы, а также обычные цифры. Имя переменной не может начинаться с цифры.

Если программа столкнулась с ошибкой, будет отправлено два сообщения: с текстом ошибки и с Python-кодом скомпилированной программы. Обычно пристального взгляда хватает, чтобы понять, где ошибка, и, скорее всего, ошибка на стороне бота, а не писателя.

Пример программы, отправляющей уменьшенную копию как картинку и копию в оттенках серого как файл:

```
.пирог
уменьшить соо в 2 раза в первую
серым соо в вторую
отправить первую
файлом вторую
```

Чтобы эта програма заработала, необходимо предоставить картинку — прикрепить к тексту или ответить на сообщение с картинкой.

Пирог не отправит за писателя все созданные и изменённые картинки, об этом должен позаботиться автор программы.

Справка по командам пирога скоро будет...
